#!/usr/bin/env bash
# file: setup
# info: creates necessary links/files to setup dotfiles and install packages

# Variables
export DOTFILES=${HOME}"/.dotfiles"
export ZSH=${DOTFILES}"/zsh"
export CONFIGS="${DOTFILES}/configs"


# Homebrew
#/usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"

# Zinit
sh -c "$(curl -fsSL https://raw.githubusercontent.com/zdharma/zinit/master/doc/install.sh)"

# Brew
#/home/linuxbrew/.linuxbrew/bin/brew bundle --force --file "$HOME/.dotfiles/Brewfile"

# Fonts
nix_fonts="/usr/share/fonts"
mac_fonts="$HOME/Library/Fonts"
cp -R "$DOTFILES/fonts" $nix_fonts

# Hushes initial terminal session messages
touch "$HOME/.hushlogin"

# Simlink misc confs
for FILE in `ls $CONFIGS`; do
    CONFIG=.$FILE
    ln -frs $CONFIGS/$FILE $HOME/$CONFIG
done

cat << EOF >> $HOME/.zshrc

# Sources
source "/home/yeti/.dotfiles/zsh/env"
source "/home/yeti/.dotfiles/zsh/setopts"
source "/home/yeti/.dotfiles/zsh/zinit"
source "/home/yeti/.dotfiles/zsh/aliases"
source "/home/yeti/.dotfiles/zsh/completes"
source "/home/yeti/.dotfiles/zsh/keybind"

# Prompt
[[ ! -f $DOTFILES/.p10k.zsh ]] || source /.p10k.zsh

EOF




