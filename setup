#!/usr/bin/env bash
# file: setup
# info: creates necessary links/files to setup dotfiles and install packages

# Homebrew
#/usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"

# Zinit
sh -c "$(curl -fsSL https://raw.githubusercontent.com/zdharma/zinit/master/doc/install.sh)"

# Brew
#/home/linuxbrew/.linuxbrew/bin/brew bundle --force --file "$HOME/.dotfiles/Brewfile"

# Fonts
nix_fonts="/usr/share/fonts"
mac_fonts="$HOME/Library/Fonts"
cp -R "$HOME/.dotfiles/fonts" $nix_fonts 

# Hushes initial terminal session messages
touch "$HOME/.hushlogin"

# Simlink misc confs
export CONFIGS="$HOME/.dotfiles/configs"
for FILE in `ls $CONFIGS`; do
    CONFIG=.$FILE
    ln -frs $CONFIGS/$FILE $HOME/$CONFIG
done

# Append into .zshrc
export ZSH="$HOME/.dotfiles/zsh"
cat << 'EOF' >> $HOME/.zshrc

# Sources 
source "$HOME/.dotfiles/zsh/env"
source "$HOME/.dotfiles/zsh/setopts"
source "$HOME/.dotfiles/zsh/zinit"
source "$HOME/.dotfiles/zsh/aliases"
source "$HOME/.dotfiles/zsh/completes"
source "$HOME/.dotfiles/zsh/keybind"

# Prompt
[[ ! -f ~/.p10k.zsh ]] || source ~/.p10k.zsh

EOF




